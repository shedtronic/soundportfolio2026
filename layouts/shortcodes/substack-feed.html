{{ if .Get "url" }}
{{ $url := .Get "url" }}
{{ $limit := .Get "limit" | default 6 }}

<div class="substack-grid-wrapper">
    {{ with resources.GetRemote $url | transform.Unmarshal }}

    <div class="substack-grid">
        {{ range first $limit .channel.item }}

        {{ $excerpt := .encoded | safeHTML | plainify | truncate 140 }}

        <div class="substack-card" onclick="window.location='{{ .link }}'">
            
            <div class="substack-card-image">
                {{ with .enclosure }}
                    {{ $img := index . "-url" }}
                    <img src="{{ $img }}" alt="{{ .title | htmlUnescape }}">
                {{ end }}
            </div>

            <div class="substack-card-content">
                <h3 class="substack-card-title">{{ .title | htmlUnescape }}</h3>

                <p class="substack-card-excerpt">{{ $excerpt }}</p>

                <p class="substack-card-date">{{ dateFormat "02 Jan 2006" .pubDate }}</p>
            </div>

        </div>

        {{ end }}
    </div>

    {{ end }}
</div>
{{ end }}
